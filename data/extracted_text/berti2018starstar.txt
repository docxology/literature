StarStar Models: Process Analysis on top of
Databases
Alessandro Berti1[0000−0003−1830−4013] and Wil van der
Aalst1[0000−0002−0955−6940]
Process and Data Science department, Lehrstuhl fur Informatik 9 52074 Aachen,
RWTH Aachen University, Germany
Abstract. Muchtimeinprocessminingprojectsisspentonfindingand
understanding data sources and extracting the event data needed. As a
result, only a fraction of time is spent actually applying techniques to
discover, control and predict the business process. Moreover, there is a
lack of techniques to display relationships on top of databases without
the need to express a complex query to get the required information. In
this paper, a novel modeling technique that works on top of databases
is presented. This technique is able to show a multigraph representing
activities inferred from database events, connected with edges that are
annotatedwithfrequencyandperformanceinformation.Therepresenta-
tionmaybetheentrypointtoapplyadvancedprocessminingtechniques
that work on classic event logs, as the model provides a simple way to
retrieve a classic event log from a specified piece of model. Comparison
with similar techniques and an empirical evaluation are provided.
Keywords: Process Mining · Database Querying.
1 Introduction
Process mining is a growing branch of data science that aims to extract insights
fromeventdatarecordedininformationsystems.Severaltechniquesexisttoan-
alyze event data: process discovery algorithms are able to find a process model,
conformance checking compare event data with a process model to find devia-
tions,predictivealgorithmsaimtopredictthefutureofanincompletecasebased
on historical data. Gathering event data is, therefore, a very important aspect
for the success of process mining projects, that start from the retrieval and the
validation of an event log, i.e., a log of events related to different executions
of a business process. Information systems are often built on top of relational
databases,toensuredataintegrityandnormalization.Relationaldatabasescon-
tain entities (tables) and relations between entities; events could be recorded in
tables of the databases (through in-table versioning) or could be retrieved using
some database log (like redo logs). In both cases, to extract an event log a case
notion should be chosen: this means that a specific view on the database is se-
lected, events related to this view are retrieved from the database and grouped
byaspecificsetofcolumns(thecaseid)intocases.Severalviewsonthedatabase
8102
voN
02
]BD.sc[
1v34180.1181:viXra
2 Alessandro Berti and Wil van der Aalst
(a) Classical ETL scenario (b) StarStar models
Fig.1:ComparisonbetweentwodifferentprocessminingETLscenarios:thefirst
is about choosing some views on the data and getting several event logs from
the same database that could be used to obtain different process models using
mainstream discovery techniques. The second is about inserting all the data in
a StarStar model and observing the processes on the A2A multigraph having
also the possibility (drill down) to choose a case notion. When a case notion
is selected, a classic event log can be generated and subsequently analyzed by
existing process mining techniques.
couldberetrieved,thismeans thatforthe samedatabase severaleventlogs and
process models could be extracted. However, if the process is very complex, in-
volving many different entities, the construction of the view is not easy: deep
knowledge of the process and the table structure may be required, moreover the
execution time of queries needed to extract event data may be very time con-
suming. This approach of querying event data is represented on the left-hand
side of Fig. 1. There has been some research regarding the possibility to make
SQL queries easier [3,1]. The basic idea is to provide the business analyst a way
to express queries in a simpler language (SPARQL query). Recently two other
approacheshavebeenproposedinordertosupportprocessminingondatabases:
– OpenSLEXmeta-models[11].Inthiscase,thedatabaseupdatesareinserted
into a meta-model where events, activities associated to events, objects, ob-
jectversionsandrelationshipsarestoredinaclearwayandcanberetrieved
with simple queries. To obtain classic event logs, a case notion (connecting
events each other) needs to be used.
– Object-centricmodels[9].Inthiscase,aprocessmodelinvolvingentitiesand
relations in the ER model, connecting activities related to events, is found,
StarStar Models: Process Analysis on top of Databases 3
and multiple case notions may coexist. This class of models provides scope
for conformance checking application and can be used to learn interesting
patterns related to the cardinality of events.
Fig.2: Representation of the activities
multigraph in a StarStar model of a
software house ticketing system. The
management of customer problems in-
volves events of several different enti-
ties (e.g., ticket management, delivery
appointment registration, software bug
lifecyclemanagement)butcouldbecap-
tured in a unified way by the activities
multigraph.
There are some difficulties to successfully apply these approaches in real-life ap-
plications. OpenSLEX provides indeed some connectors for database logs (redo
logs,in-tableversioning,orspecificdatabaseformats[8]),butrequirethespecifi-
cation of a single case notion in order to get an event log. Although OpenSLEX
meta-models are simpler than the actual database, it is difficult to select the
right case notion that may depend on the question to answer. Once the case
notion is expressed, it is easy to get from the meta-model a proper event log to
apply mainstream process mining techniques. Object-centric models, after the
discoveryalgorithmhasbeenapplied,providetheuseravisualizationofamodel
that involves entities and activities, and this does not require the specification
of a case perspective, but a classic event log cannot be obtained (and so exist-
ing process mining techniques could not be applied). This paper introduces a
new modeling technique that is able to calculate a graph where relationships
between activities are shown without forcing the user to specify a case notion,
since different case notions are combined in one succint diagram.
The resulting models are called StarStar models. Such models belong to the
classofartifact-centricmodels[7,12]thatcombinedataandprocessinaholistic
mannertodiscoverpatternsandcheckcompliance[10].StarStarmodelsprovide
4 Alessandro Berti and Wil van der Aalst
a graphical way to choose a case notion and analyze an event log to use with
classic process mining techniques.
A StarStar model is a representation of event data contained in a database.
It is a collection of several graphs:
– An event to object graph E2O that aims to represent events and objects
extracted from the database and relationships between them.
– An event to event multigraph E2E that aims to represent directly-follows
relationships between events in the perspective of some object.
– An activities multigraph A2A that aims to represent directly-follows rela-
tionships between activities in the perspective of some object class.
ETL scenario using StarStar models is shown on the right-hand side of Fig.
1. The visualization part of a StarStar model is able to show a multigraph
betweenactivities(A2A);however,relationsintheE2OandE2Emultigraphsare
importantforfilteringthemodelandforperformingaprojectionontheselected
casenotion.TheE2Ographisobtaineddirectlyfromthedata.FortheE2Eand
the A2A multigraphs some algorithms (that runs in linear complexity) will be
provided in the following sections. Anexample of a StarStar modelrepresenting
a software house ticketing system is shown in Fig. 2. The approach has been
implementedasapluginintheProMtoolandevaluatedusingdatasetsextracted
from a Customer Relationship Management (CRM) system.
2 Background
Relational databases are organized in entities (classes of objects sharing some
properties), relationships (connections between entities [6]), attributes (proper-
tiesofentitiesandrelationships).Eventscanbeviewedasupdatesofadatabase
(e.g.insertionofnewobjects,changestoexistingobjects,removalofexistingob-
jects). Some ways to retrieve events from databases are:
– Usingredologs(see[11]).Thesearelogswhereeachoperationinthedatabase
is saved with a timestamp; this helps to guarantee consistency, and possibil-
ity to rollback and recovery.
– Using in-table versioning. In this case, the primary key is enriched by a
timestamp column. For each phase of the lifecycle of an object, a new entry
is added to the in-table versioning, sharing the primary key values except
the timestamp column.
An event may be linked to several objects (for example, the event that starts
a marketing campaign in a CRM system may be linked to several customers),
and an object may be linked to several events (for example, each customer can
be related to all the tickets it opens). For the following definition, let U be
E
the universe of events (all the events happening in a database context), U
O
the universe of objects (all the objects that are instantiated in the database
context), U is the universe of object classes (a class define the structure and
OC
the behavior of a set of objects), U the universe of activities (names referring
A
StarStar Models: Process Analysis on top of Databases 5
to a particular step of a process), U the universe of attribute names (all the
attr
names of the attributes that can be related to an event), U the universe of
val
attribute values (all the possible values for attributes). It is possible to define
a function class : U → U that associates each object to the corresponding
O OC
object class.
Definition 1 (Event log in a database context) Aneventloginadatabase
context is a tuple L =(E,act,attr,EO,≤) where:
D
– E ⊆U is a set of events
E
– act∈E →U maps events onto activities
A
– attr ∈ E → (U (cid:54)→ U ) maps events onto a partial function assigning
attr val
values to some attributes
– EO⊆E×U relates events to sets of object references
O
– ≤ ⊆E×E defines a total order on events.
An example attribute of an event e is the timestamp attr(e)(time) which refer
to the time the event happened. Given the previous definition, we could get the
setofobjectsreferencedintheeventlogasO ={o|(e,o)∈EO}.Fortheclassic
process mining event log definition, let U be the universe of case identifiers.
C
Definition 2 (Classic event log) AneventlogisatupleL=(C,E,case ev,act,
attr,≤) where:
– C ⊆U is a set of case identifiers
C
– E ⊆U is a set of events
E
– case ev ∈ C → P(E) maps case identifiers onto set of events (belonging to
the case)
– act∈E →U maps events onto activities
A
– attr ∈ E → (U (cid:54)→ U ) maps events onto a partial function assigning
attr val
values to some attributes
– ≤ ⊆E×E defines a total order on events.
To project an event log in a database context to a classic event log, a case
notion needs to be chosen, so events that should belong to the same case can be
grouped. Let L = (E,act,attr,EO,≤) be an event log in a database context.
D
(cid:83)
Acase notionisasetC ⊆P(E)\∅suchthat x=E.Letid:C →U
D x∈CD D C
a function that associates a case identifier to a set of events. It is possible to
define a projection function:
proj(C ,L )=(C,E,case ev,act,attr,≤)
D D
where C = ∪ id(x), case ev ∈ C → P(E) such that for all c ∈ C ,
x∈CD D
case ev(id(c)) = c. An implementation of the event log format described in
Definition 1 is the XOC format [9], that is expressed in XML language.
6 Alessandro Berti and Wil van der Aalst
3 Approach
In this section, a definition of the components of StarStar models will be in-
troduced. The E2O graph will be obtained directly from the database logs; the
E2E multigraph will be obtained in linear complexity by calculating directly-
follows relationships between events in the perspective of some object; the A2A
multigraph will be obtained in linear complexity by calculating directly-follows
relationshipsbetweenactivitiesintheperspectiveofsomeobjectclass,usingthe
informationstoredintheE2Emultigraph.TheA2Amultigraphisthevisualel-
ement of a StarStar model, and a projection function will be introduced in this
section to obtain a classic event log when a perspective is chosen.
3.1 Construction of the Model
StarStar models are composed of several graphs (E2O, E2E, A2A) and are con-
structed by reading a representation of event data retrieved from a database
(OpenSLEX meta-models or XOC logs).
Definition 3 (E2O graph) Let L = (E,act,attr,EO,≤) be an event log in
D
a database context. EO⊆E×O is an event to object graph relating events (E)
and objects (O).
The E2O graph is obtained directly from the data without any transformation.
TheremainingstepsintheconstructionofaStarStarmodelaretheconstruction
of the E2E multigraph and of the A2A multigraph. The following functions on
objects are used:
– g : U → P(U ), g(o) = {e ∈ U | (e,o) ∈ EO} is a function that for each
O E E
object returns the set of events that are related to the object.
– w :U →R,w(o)= 1 istheweightoftheobjectandisdefinedas the
O |g(o)|+1
inverseofthecardinalityofthesetofrelatedeventstothegivenobjectplus
1.ThisweightfunctionwillbeusedintheconstructionofE2Emultigraphto
give less importance to relations based on objects that are related to many
events.
– (cid:93) : U → U , (cid:93) (o) = e such that e ∈ g(o) ∧ |{e(cid:48) ∈ g(o) | e(cid:48) ≤ e}| = k
k O E k
for 1 ≤ k ≤ |g(o)| is a function that in the totally ordered set g(o) returns
the k-th element.
Definition 4 (E2E multigraph) Let L = (E,act,attr,EO,≤) be an event
D
log in a database context. Let
F ={(o,i) | o∈O ∧ 2≤i≤|g(o)|}
E
such that for every edge f ∈F the following attributes are defined:
E E
– ΠE (f )∈O is the object associated to the edge.
obj E
– ΠE(f )∈E is the input event associated to the edge.
in E
– ΠE (f )∈E is the output event associated to the edge.
out E
StarStar Models: Process Analysis on top of Databases 7
– ΠE (f ) ∈ R+ associates each edge to a positive real number expressing
weight E
its weight.
– ΠE (f ) ∈ R+ ∪{0} associates each edge to a non-negative real number
perf E
expressing its performance.
For f =(o,i)∈F :
E E
– ΠE (f )=o
obj E
– ΠE(f )=(cid:93) (o)
in E i−1
– ΠE (f )=(cid:93) (o)
out E i
– ΠE (f )=w(o)
weight E
– ΠE (f )=attr(Π (f ))(time)−attr(Π (f ))(time)
perf E out E in E
The event to event multigraph (E2E) can be introduced having events as nodes
and associating each couple of events (e ,e ) ∈ E ×E to the following set of
1 2
edges:
R (e ,e )= (cid:8) f ∈F | ΠE(f )=e ∧ΠE (f )=e (cid:9)
E 1 2 E E in E 1 out E 2
TheintroductionofthesetF isusefulforthedefinitionoftheA2Amultigraph
E
(that is the visual element of a StarStar model). Although it does not make
sense to represent the overall E2E multigraph, involving relationships between
all events, it may be useful to display directly-follows relationships involving a
specific event or a specific couple of events. In this case, a representation of the
E2Emultigraphdrawsasmanyedgesbetweenacoupleofevents(e ,e )∈E×E
1 2
as the number of elements contained in the set R (e ,e ). To each edge f ∈
E 1 2 E
R (e ,e ), a label could be associated in the representation taking as example
E 1 2
the weight ΠE (f ) or the performance ΠE (f ).
weight E perf E
Definition 5 (A2A multigraph) Let L = (E,act,attr,EO,≤) be an event
D
log in a database context. Let
F ={(c,(a ,a )) | c∈U ∧ (a ,a )∈U ×U }
A 1 2 OC 1 2 A A
such that for each edge f ∈F the following attributes are defined:
A A
– ΠA (f )∈U is the class associated to the edge.
class A OC
– ΠA(f )∈U is the source activity associated to the edge.
in A A
– ΠA (f )∈U is the target activity associated to the edge.
out A A
– ΠA (f ) ∈ N associates each edge to a natural number expressing the
count A
number of occurrences.
– ΠA (f ) ∈ R+ associates each edge to a positive real number expressing
weight A
its weight.
– ΠA (f ) ∈ R+ ∪{0} associates each edge to a non-negative real number
perf A
expressing its performance.
Let AE:F →P(F ) be a function such that for f ∈F :
A E a A
AE(f ) = { f ∈ F | class(ΠE (f )) = ΠA (f ) ∧ act(ΠE(f )) =
A E E obj E class A in E
ΠA(f ) ∧ act(ΠE (f ))=ΠA (f ) }. Then for f =(c,(a ,a ))∈F :
in A out E out A A 1 2 A
8 Alessandro Berti and Wil van der Aalst
– ΠA (f )=c
class A
– ΠA(f )=a
in A 1
– ΠA (f )=a
out A 2
– ΠA (f )=|AE(f )|
count A A
– ΠA (f )= (cid:80) ΠE (f )
weight A fE∈AE(fA) weight E
– Π p A erf (f A )=
(cid:80)
fE∈ Π AE c A o (f un A t ) (f
Π
A p
E
) erf
(fE)
The activities multigraph (A2A) can be introduced having activities as nodes and
associatingeachcoupleofactivities(a ,a )∈A×Atothefollowingsetofedges:
1 2
R (a ,a )= (cid:8) f ∈F | ΠA(f )=a ∧ΠA (f )=a (cid:9)
A 1 2 A A in A 1 out A 2
ArepresentationoftheA2Amultigraph(thatisthevisualelementofaStarStar
model) draws as many edges between a couple of activities (a ,a ) ∈ A×A as
1 2
the number of elements contained in the set R (a ,a ). To each edge f ∈
A 1 2 A
R (a ,a ), a label could be associated in the representation taking as example
A 1 2
the number of occurrences ΠA (f ), the weight ΠA (f ) or the perfor-
count A weight A
manceΠA (f ).Sincebyconstructiontheedgesinthisgraphcanbeassociated
perf A
to elements in the E2E graph (through the AE function), the possibility to drill
down to a classic event log (choosing a case notion) is maintained.
3.2 Projection to a classic event log
InSection2,thelogconceptusedinthispaper,thatisdifferentfromtheclassic
one,hasbeenproposedandaprojectionfunctionthattransformseventsfromthe
firstformattothesecondhasbeenintroduced.A2Agraphshavebyconstruction
thefunctionalitytodrilldownaspecificclassperspectiveandkeepeventsrelated
to this perspective, so it is provided the possibility to get a classic event log
out of a StarStar model. Let L = (E,act,attr,EO,≤) be an event log in a
D
database context. The following similarity function between sets of events could
be introduced:
|E ∩E |
sim:P(U )×P(U )→R sim(E ,E )= 1 2
E E 1 2 max(|E |,|E |)
1 2
along with the following case notion (a class c∈U is chosen):
OC
C0 :U ×(0,1]→P(E)
OC
(cid:91) (cid:91)
C0(c,ω)= g(o )∪g(o )
2 1
o1∈O,class(o1)=c o2∈O,sim(g(o1),g(o2))≥ω
Thenaclassicaleventlogcouldbeobtainedasproj(L ,C0(c,ω)).Whenω =1,
D
then the case notion takes the set of related events for each object belonging to
the class. When ω is near to 0, for example ω =0.01, then cases are formed by
the union of several sets of events. The parameter ω is called connection weight
threshold. We could define iteratively different case notions (for i≥1):
Ci :U ×(0,1]→P(E)
OC
StarStar Models: Process Analysis on top of Databases 9
(cid:91) (cid:91)
Ci(c,ω)= s∪g(o )
1
o1∈O,class(o1)=c s∈Ci−1(c,ω),sim(g(o1),s)≥ω
Then a classical event log could be obtained as proj(L ,Ci(c,ω)). The number
D
of iterations i is called log window. With a connection weight threshold that is
relatively near to 0, the size of each case increases at the increase of the number
of iterations done to define the case notion.
4 Support tool
InordertoevaluatetheStarStarmodelsrepresentation,aProMplug-inhasbeen
realized that is able to take as input a representation of the events happening
at database level, is able to calculate the StarStar model starting from the data
and to show it to the end user using the mxGraph library. The supported input
data types include:
– XOClogs[9],thathavebeenpresentedinSection2,areXMLsstoringevents
along with their related objects and the status of the object model at the
timetheeventhappened.ThesecanbeimportedfromtheImportbuttonby
providing the XOC log. SomeXOClogs could be foundin the tests folder of
the project. In particular, the following logs are provided:
• An example ERP log (erp.xoc) extracted from a Dollibar CRM installa-
tion.Theresultingmultigraphisverysimpleandconsistsofthefollowing
perspectives: supplier order line, dispatch.
• Acommercialopportunitieslog(opportunities.xoc)extractedfromaDy-
namicsCRMdemoinstallation.Themultigraphcontainsmanyperspec-
tives and activities.
Fig.3: StarStar models visualization plug-in inside the ProM framework.
Afterreadingthemeta-model,theE2Ographisbuiltin-memory,andsothe
E2E graph and the A2A graph. After importing, the model can be viewed
by clicking the View button in ProM.
10 Alessandro Berti and Wil van der Aalst
– OpenSLEX meta-models [11]. As example, we provide an OpenSLEX meta-
model metamodel.slexmm generated from a concert ticket management
database. This can be imported, in a similar way to XOC logs, using the
Import button in the ProM interface. As for XOC logs, the E2O graph is
built in-memory, and so the E2E graph and the A2A graph, and the model
can be viewed by clicking the View button in ProM.
– Neo4Jdatabases.Inthiscase,eventandobjectdataextractedfromadatabase
are inserted in a prior step as nodes in the graph, and edges are inserted in
the graph if there is a relationship between an event and an object. This
is the E2O graph. The E2E graph is formed by calculating the directly-
follows relation on the E2O graph (this can be done executing a script on
thedatabase),andtheA2AgraphisformedstartingfromtheE2Egraphby
aggregating connections as explained in Section 3.1. Then, the ProM frame-
work can provide visualization of the StarStar models by querying Neo4J
and doing specific queries. The plug-in StarStarModel Neo4J Connector im-
plementstheconnectortothisdatasourcebysimplyprovidingthehostname
and the port of the database.
Fig.4: Representation of the sliders provided in the ProM plug-in: Minimum
activity count regulates the minimum number of occurrences of an activity dis-
played in the multigraph; Minimum path count regulates the minimum number
of occurrences of a path displayed in the multigraph; Weight threshold regulates
the threshold to use to keep/filter out edges in the displayed graph; Parallel
edges spacing specifies the distance between parallel edges in the same view; In-
ter rank cell spacing specifies the distance between ranks (different hierarchies
of nodes as discovered by the layouting algorithm); Intra cell spacing specifies
the distance between cells of the same rank (same hierarchy in the layouting
algorithm). Another feature that has been implemented in order to improve us-
ability are the checkpoints: during a filtering process, it may be useful to save a
statusandretrieveitlater.ThetwobuttonsReset model to checkpointandSave
current model as checkpoint are provided on the top of the right panel.
The ProM implementation of the importer for XOC logs and OpenSLEX meta
models works in-memory. However, the Neo4J database scales better, and is
StarStar Models: Process Analysis on top of Databases 11
Fig.5: Log projection functionality implemented in the ProM plug-in. The pa-
rameters are the log window, that is the number of iterations done by the pro-
jection algorithm, and the connection weight threshold, that is the minimum
connection strength between two objects that should exist to enable the merge
between the sets of related events. The projection plug-in provides the possibil-
ity to extract the event log that is stored in the ProM workspace, or to apply
directlytheInductiveMinertodiscoveraprocessschemafromtheprojectedlog
and open it as a tab of the visualization.
possible to upload an XOC log into a Neo4J database and, after that, query-
ing it. This part has been implemented in Python and is available in the xoc-
Neo4JUpload folder. The plug-in (shown in Fig. 3) provides a tabbed view of
the A2A multigraph on the left, along with some sliders on the right regulating
the complexity of the graph displayed. Since the A2A multigraph may contain
many edges, an initial set-up of the visualization is made in order to keep only
edges between activities that have a meaningful weight. As a result of removing
suchedges,activitiesmaybecomedisconnected.Withthedefaultselectionofthe
metric, activities are decorated by a color that is dark when the number of oc-
currencesoftheactivityishigh,andtheirlabelisthenameoftheactivityalong
withthenumberofoccurrencesoftheactivity.Edgescolorandwidthdependon
thefrequencyoftherelation,andthelabelreportstheperspectiveandthenum-
ber of occurrences of the relation. Some sliders, shown in Fig. 4, are provided to
the user in order to regulate the graph visualization. Since several metrics could
beprojectedintothearcs,ametricselectionmenuhasbeenimplementedonthe
rightpanelinordertochoosethemetric(count,performance,weight).Thecolor
ofactivitiesandarcs,andthewidthofthearcs,dependonthemetricandonthe
value of the arc. For example, when the frequency metric is selected, then the
arc has greater width when the number of occurrences of the relation described
by the edge is higher. The visualization plug-in provides several options to filter
theStarStarmodelandkeeponlyactivities/perspectivesthatareinteresting.In
particular,selectingsomeedgesbyusingtheCTRL+Clickcontrol,itispossible
to apply a filter on edges. The filter works as follows: all objects belonging to
the perspective and related to events which activity is the source activity of the
edge are retrieved into an object set, and then the StarStar model is calculated
again keeping only events that are related to at least one object in the object
set. This is similar, in the classic process discovery setting, to filtering in a log
all the events belonging to cases where an edge between activities is present at
least once, and is similar to the approaches described in [4,5]. Then, for edges is
12 Alessandro Berti and Wil van der Aalst
provided the possibility to retrieve a classic event log, in the way explained in
Section 3.2 and shown in Fig. 5.
5 Evaluation
ThissectionpresentsastudyofdataextractedfromaMicrosoftDynamicsCRM
demoandanalyzedthroughaStarStarmodel.ACustomerRelationshipManage-
mentsystem(CRM)[2]isaninformationsystemusedtomanagethecommercial
lifecycle of an organization, including management of customers, opportunities
and marketing campaigns. Many companies actually involve a CRM system for
helping business and sales people to coordinate, share information and goals.
Data extracted from Microsoft Dynamics CRM is particularly interesting since
this product manages several processes of the business side, providing the pos-
sibility to define workflows and to measure KPI also through connection to the
Microsoft Power BI business intelligence tool. For evaluation purposes, an XOC
log has been generated containing data extracted from a Dynamics CRM demo.
The database supporting the system contains several entities, and each entity
contains several entries related to activities happening in the CRM. Each en-
try could be described by a unique identifier (UUID), the timestamp of cre-
ation/change, the resource that created/modified the entry, and some UUIDs
of other entries belonging to the same or to different entities. Moreover, each
entry is uniquely associated to the entity it belongs to. The following strategy
has been pursued in order to generate an XOC log:
– For each entry belonging to an entity, two events have been associated: cre-
ation event (with the timestamp of creation and lifecycle start) and modify
event (with the timestamp of modification and lifecycle complete).
– Each entry belonging to an entity has also been associated to an object.
– Relationships between events and objects are created accordingly to the
relationships expressed by the entries (an entry may cite several UUIDs of
other entries stored in the database).
The previous construction means that for the same entry there are two events
andoneobjectintheXOClog.Moreover,inanXOClogeventsrelatedtoallthe
processesbelongingtotheDynamicsCRMinformationsystemhavebeenstored.
The XOC log is stored inside the tests folder of the StarStar models package in
order to provide a real use case of StarStar models. The log could be imported
using the StarStar model import plug-in and a visualization of the commercial
opportunitiesprocessesandtheirrelationshipsisprovided.Theweightthreshold
is automatically set by the algorithm to 0.5. For the process described by the
log, a weight threshold of 0.4 represent the model at a more appropriate level of
complexity.Themostimportantprocessesofthecommerciallifecycleareshown
as a single connected component, describing the order in which activities have
been performed:
– A commercial opportunity is started on the CRM system, associated to a
lead (a potential customer that has been identified with enough elements to
start a sales approach).
StarStar Models: Process Analysis on top of Databases 13
Fig.6: Representation of a specific subset of activities in the A2A multigraph of
the StarStar model extracted from a Dynamics CRM system as shown by the
ProM plug-in.
– One or more of the following activities have been performed: a set of prod-
ucts from the company catalog is chosen for the lead in order to propose
a solution; an ad-hoc marketing campaign, that could be targeted to com-
panies of the sector or having the same issues/concerns, could be started;
a connection with other customers could be inserted in the system by sales
people. This could be useful to better evaluate and qualify the lead.
– Phone calls, appointments, or other types of commercial tasks (e.g. writing
a message or involving the customer in a demo) can be set-up in the CRM.
A view of this process could be seen in Fig. 6. In Fig. 6, information related
to several entities (from the OData endpoint: opportunity, opportunityproducts,
campaigns,activitypointers,connections)hasbeenmergedinasinglemultigraph
thattakesintoaccountseveralperspectives.Obtainingaclassiceventlogdescrib-
ing all this information would have required to do a join of 5 different database
tables,whileobtainingtheviewwasstraightforwardwithStarStarmodelsProM
plug-in. A problem of the A2A multigraph is that it does not capture concur-
rency / parallelism between activities; it is required to extract a classic event
log from the StarStar model and then do the analysis using a classic process
discovery technique (like Inductive Miner). Applying the projection technique
described in Section 3.2, choosing opportunity as perspective, with log window
set equal to 2 and connection weight threshold set to 0.05, and applying the
InductiveMinerwithnoisethresholdsetto0.4,thePetrinetdisplayedinFig.7
isobtained.ThePetrinetinFig.7providesfurtherinformationabouttheorder
14 Alessandro Berti and Wil van der Aalst
Fig.7: Representation of the Petri net obtained choosing the opportunity per-
spective on the graph and applying projection.
in which activities are done. In particular, it should be noted that:
– No activities related to campaigns are present in the Petri net. In general,
campaignscanexistwithoutopportunities,andopportunitiescanexistwith-
out campaigns, so the connection threshold between them is very low.
– The completion of commercial tasks may also happen after the event of
closure of the opportunity. This is a problem in reporting: while tasks are
alreadyperformed,theirdocumentationintheDynamicsCRMmayhappen
sometime after the closure.
Another interesting process, that is contained in the Dynamics CRM but is not
related to the core commercial activities, is the measurement of performance
of the business. In Dynamics CRM, there are goals (targets in terms of sales/-
contacts/campaigns diffusion) and metrics (how to effectively measure perfor-
mance). Using the projection function to obtain a classic event log (with log
window set to 2 and connection weight threshold set to 0.05), and applying In-
ductive Miner with noise threshold set to 0.2, the Petri net displayed in Fig. 8
is obtained, where the setting of metrics usually happen before the setting of
goals, and several goals could be defined using the same metrics. The discovery
Fig.8:RepresentationofthePetrinetobtainedchoosingthemetricsperspective
on the graph and applying projection.
ofthisprocessusingclassicqueriesontheDynamicsCRMdatabasewouldhave
required the merge of at least two different entities. Even if this process does
not belong to the core commercial activities, StarStar models with no effort can
present a complete view of all the processes contained in the Dynamics CRM.
6 Conclusions
This paper introduces StarStar models, providing a way to reduce ETL efforts
ondatabasesinordertoenableprocessminingprojects.StarStarmodelsprovide
StarStar Models: Process Analysis on top of Databases 15
a multigraph visualization of the relationships between activities happening in
a database, and the possibility to drill down. By selecting any case notion inter-
actively we get a classic event log that can be analyzed using existing process
mining techniques. Each step in the construction of a StarStar model has lin-
ear complexity and can be done on graph databases (since all involved objects
are graphs). A plug-in has been implemented on the ProM framework that can
import data extracted from databases (in XOC or SLEX format), build the
StarStar model and provide a visualization of the activities multigraph along
with filtering and projection capabilities. While the activities multigraph does
not provide a formal execution semantics, projected logs can be used to extract
Petri nets, so formal models with a clear execution semantic. Assessment done
on the Dynamics CRM system gives evidence that StarStar models can han-
dle the complexity of current information systems, and provide an usable and
time-effective ETL scenario.
References
1. Bouchou, B., Niang, C.: Semantic mediator querying. In: Proceedings of the 18th
International Database Engineering & Applications Symposium. pp. 29–38. ACM
(2014)
2. Buttle, F.: Customer relationship management. Routledge (2004)
3. Calvanese, D., Cogrel, B., Komla-Ebri, S., Kontchakov, R., Lanti, D., Rezk, M.,
Rodriguez-Muro, M., Xiao, G.: Ontop: Answering sparql queries over relational
databases. Semantic Web 8(3), 471–487 (2017)
4. Catarci, T., Costabile, M.F., Levialdi, S., Batini, C.: Visual query systems for
databases: A survey. Journal of Visual Languages & Computing 8(2), 215–260
(1997)
5. Chau, D.H., Faloutsos, C., Tong, H., Hong, J.I., Gallagher, B., Eliassi-Rad, T.:
Graphite: A visual query system for large graphs. In: Data Mining Workshops,
2008. ICDMW’08. IEEE International Conference on. pp. 963–966. IEEE (2008)
6. Chen, P.P.S.: The entity-relationship model toward a unified view of data. ACM
Transactions on Database Systems (TODS) 1(1), 9–36 (1976)
7. Cohn, D., Hull, R.: Business artifacts: A data-centric approach to modeling busi-
ness operations and processes. IEEE Data Eng. Bull. 32(3), 3–9 (2009)
8. Ingvaldsen,J.E.,Gulla,J.A.:Preprocessingsupportforlargescaleprocessmining
ofsaptransactions.In:InternationalConferenceonBusinessprocessmanagement.
pp. 30–41. Springer (2007)
9. Li,G.,deCarvalho,R.M.,vanderAalst,W.:Automaticdiscoveryofobject-centric
behavioralconstraintmodels.In:InternationalConferenceonBusinessInformation
Systems. pp. 43–58. Springer (2017)
10. Lohmann, N.: Compliance by design for artifact-centric business processes. In:
International Conference on Business Process Management. pp. 99–115. Springer
(2011)
11. de Murillas, E.G.L., Reijers, H.A., van der Aalst, W.: Connecting databases with
processmining:ametamodelandtoolset.Software&SystemsModelingpp.1–39
(2018)
12. Nigam, A., Caswell, N.S.: Business artifacts: An approach to operational specifi-
cation. IBM Systems Journal 42(3), 428–445 (2003)